<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="Theffth"><meta name="copyright" content="Theffth"><meta name="generator" content="Hexo 4.2.1"><meta name="theme" content="hexo-theme-yun"><title>Compiler -- CS143 | Tå›çš„å°å±‹</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.21/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="shortcut icon" type="image/svg+xml" href="/logo.svg"><link rel="mask-icon" href="/logo.svg" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"theffth.github.io","root":"/","title":"Tå›çš„å°å±‹","version":"1.2.0","mode":"auto","copycode":true,"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><meta name="description" content="å­¦ä¹ Compileræ—¶å®ŒæˆCS143è¯¾ç¨‹ç›¸å…³labçš„è®°å½•å’Œå¿ƒå¾—ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Compiler -- CS143">
<meta property="og:url" content="http://theffth.github.io/2020/07/29/Compiler-CS143/index.html">
<meta property="og:site_name" content="Tå›çš„å°å±‹">
<meta property="og:description" content="å­¦ä¹ Compileræ—¶å®ŒæˆCS143è¯¾ç¨‹ç›¸å…³labçš„è®°å½•å’Œå¿ƒå¾—ã€‚">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/Theffth/PictureBed/master/img/cs143-1.png">
<meta property="article:published_time" content="2020-07-28T16:05:26.000Z">
<meta property="article:modified_time" content="2020-10-24T06:28:35.379Z">
<meta property="article:author" content="Theffth">
<meta property="article:tag" content="compiler">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Theffth/PictureBed/master/img/cs143-1.png"><script src="/js/ui/mode.js"></script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="stylesheet" href="/js/prism/prism.css"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="Theffth"><img width="96" loading="lazy" src="https://i.loli.net/2020/10/23/EgpBftlhNG5Xaxb.png" alt="Theffth"><span class="site-author-status" title="dropping hair">ğŸ˜†</span></a><div class="site-author-name"><a href="/about/">Theffth</a></div><a class="site-name" href="/about/site.html">Tå›çš„å°å±‹</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">1</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">1</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">1</span></a></div><a class="site-state-item hty-icon-button" href="https://yun.yunyoujun.cn" target="_blank" rel="noopener" title="æ–‡æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Theffth" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:1102468264@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#A-Tour-of-the-Cool-Support-Code-éƒ¨åˆ†åˆ†æ"><span class="toc-number">1.</span> <span class="toc-text">A Tour of the Cool Support Code éƒ¨åˆ†åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Lists"><span class="toc-number">1.1.</span> <span class="toc-text">Lists</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String-Tables"><span class="toc-number">1.2.</span> <span class="toc-text">String Tables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Symbol-Tables"><span class="toc-number">1.3.</span> <span class="toc-text">Symbol Tables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Utilities"><span class="toc-number">1.4.</span> <span class="toc-text">Utilities</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Abstract-Syntax-Tree"><span class="toc-number">1.5.</span> <span class="toc-text">Abstract Syntax Tree</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Phyla-and-Constructors"><span class="toc-number">1.5.1.</span> <span class="toc-text">Phyla and Constructors</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PA2-lexer-è¯æ³•åˆ†æ"><span class="toc-number">2.</span> <span class="toc-text">PA2 lexer è¯æ³•åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç”Ÿæˆlexerä»£ç åˆ†æ"><span class="toc-number">2.1.</span> <span class="toc-text">ç”Ÿæˆlexerä»£ç åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PA3-parser-è¯­æ³•åˆ†æ"><span class="toc-number">3.</span> <span class="toc-text">PA3  parser  è¯­æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PA4-Semant-è¯­ä¹‰åˆ†æ"><span class="toc-number">4.</span> <span class="toc-text">PA4 Semant è¯­ä¹‰åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ€è€ƒé—®é¢˜"><span class="toc-number">4.1.</span> <span class="toc-text">æ€è€ƒé—®é¢˜</span></a></li></ol></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/compiler/" style="font-size: 12px; color: #999">compiler</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://theffth.github.io/2020/07/29/Compiler-CS143/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Theffth"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Tå›çš„å°å±‹"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Compiler -- CS143</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2020-07-29 00:05:26" itemprop="dateCreated datePublished" datetime="2020-07-29T00:05:26+08:00">2020-07-29</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2020-10-24 14:28:35" itemprop="dateModified" datetime="2020-10-24T14:28:35+08:00">2020-10-24</time></div><div class="post-classify"><span class="post-category"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/Binary-Basics/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Binary Basics</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/compiler/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">compiler</span></a></span></div><div class="post-author"><span class="author-name">Theffth</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><p>æ­¤æ–‡æ¡£ä¸»è¦è®°å½•å’Œæ€»ç»“cs143è¯¾ç¨‹ç›¸å…³çš„labé¡¹ç›®ã€‚é˜…è¯»å’Œç†è§£è¯¾ç¨‹æä¾›çš„ä»»åŠ¡æŒ‡å¯¼ä¹¦å’Œä»»åŠ¡æŒ‡å¯¼ä¹¦ä¸­è¦æ±‚é˜…è¯»çš„ææ–™éå¸¸é‡è¦ã€‚</p>
<p> The Cool Reference Manual çš„éƒ¨åˆ†ç¿»è¯‘ï¼š <a href="https://www.cnblogs.com/pinkman/archive/2013/03/12/2954902.html" target="_blank" rel="noopener">https://www.cnblogs.com/pinkman/archive/2013/03/12/2954902.html</a> </p>
<h2 id="A-Tour-of-the-Cool-Support-Code-éƒ¨åˆ†åˆ†æ"><a href="#A-Tour-of-the-Cool-Support-Code-éƒ¨åˆ†åˆ†æ" class="headerlink" title="A Tour of the Cool Support Code éƒ¨åˆ†åˆ†æ"></a>A Tour of the Cool Support Code éƒ¨åˆ†åˆ†æ</h2><p>æ­¤æ–‡æ¡£ä¸»è¦ä»‹ç»lab projectä¸­çš„æä¾›çš„æ–‡ä»¶ï¼Œç»“åˆæºä»£ç ç†è§£å®ƒä»¬å¹¶æ­£ç¡®ä½¿ç”¨å·²æœ‰æ¶æ„å¾ˆé‡è¦ã€‚</p>
<h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><p>list.hæ–‡ä»¶å®ç°äº†ç®€å•çš„é“¾è¡¨æ•°æ®ç±»å‹ï¼Œæ„é€ å‡½æ•°Liståœ¨é“¾è¡¨çš„å‰éƒ¨æ·»åŠ æ–°å…ƒç´ ï¼Œhdè¿”å›é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œtlè¿”å›é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘çš„åç»­é“¾è¡¨ã€‚æä¾›å‡½æ•°list_map()ï¼Œlist_print(), list_length()ã€‚æ­¤ç»“æ„åœ¨å®ç°string tableså’Œsymbol tablesçš„æ—¶å€™éƒ½æœ‰ç”¨åˆ°ã€‚</p>
<h3 id="String-Tables"><a href="#String-Tables" class="headerlink" title="String Tables"></a>String Tables</h3><p>æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½éœ€è¦ç»´æŠ¤å¤§é‡çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šç¨‹åºæ ‡è¯†ç¬¦ã€æ•°å­—å‹å¸¸é‡å’Œå­—ç¬¦ä¸²å¸¸é‡ã€‚é€šå¸¸ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¸­æœ‰è®¸å¤šæ˜¯ç›¸åŒçš„ã€‚ä¾‹å¦‚ï¼šæ¯ä¸€ä¸ªæ ‡è¯†ç¬¦é€šå¸¸ä¼šåœ¨ç¨‹åºä¸­å‡ºç°å¾ˆå¤šæ¬¡ã€‚ä¸ºäº†ç¡®ä¿å­—ç¬¦ä¸²å¸¸é‡çš„ç´§å‡‘å­˜å‚¨å’Œæœ‰æ•ˆæ“ä½œï¼Œéœ€è¦ä½¿ç”¨ä¸“é—¨çš„æ•°æ®ç»“æ„â€”â€”å­—ç¬¦ä¸²è¡¨ã€‚</p>
<p>å­—ç¬¦ä¸²è¡¨æ˜¯ç»´æŠ¤äº†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç®€å•copyçš„æŸ¥æ‰¾è¡¨ï¼ŒCoolå­—ç¬¦ä¸²è¡¨ç±»åœ¨stringtab.hä¸­æä¾›äº†å„ç§æ’å…¥å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²è¡¨çš„å‡½æ•°ã€‚å®é™…ä¸­çš„ç¼–è¯‘å™¨ä½¿ç”¨å“ˆå¸Œæ•°æ®ç»“æ„æ¥å®ç°å­—ç¬¦ä¸²è¡¨ï¼ŒCoolç¼–è¯‘å™¨ä½¿ç”¨listsé“¾è¡¨æ¥å®ç°å­—ç¬¦ä¸²è¡¨ã€‚</p>
<p>Coolå­—ç¬¦ä¸²è¡¨ç”±ç±»å‹Entryç»„æˆï¼Œæ¯ä¸€ä¸ªEntryå­˜å‚¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦å’Œè¯¥å­—ç¬¦ä¸²çš„å”¯ä¸€æ•´æ•°ç´¢å¼•ä¸‹æ ‡ã€‚Coolç¼–è¯‘å™¨ç»“æ„çš„é‡è¦ä¸€ç‚¹æ˜¯å®ƒæœ‰ä¸‰ä¸ªä¸åŒçš„å­—ç¬¦ä¸²è¡¨ï¼šstringtableï¼ˆå­—ç¬¦ä¸²å¸¸é‡è¡¨ï¼‰,inttableï¼ˆæ•´æ•°å¸¸é‡è¡¨ï¼‰,idtableï¼ˆæ ‡è¯†ç¬¦è¡¨ï¼‰ã€‚code generator å¿…é¡»åŒºåˆ†æ•´æ•°å¸¸é‡å’Œå­—ç¬¦ä¸²å¸¸é‡ï¼Œå¹¶ä»æ ‡è¯†ç¬¦ä¸­åŒºåˆ†å®ƒä»¬ï¼Œå› ä¸ºç¨‹åºä¸­æ¯ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡å’Œæ•´æ•°å¸¸é‡éƒ½ç”Ÿæˆä¸åŒçš„ä»£ç ã€‚æ‹¥æœ‰ä¸‰ä¸ªä¸åŒçš„å­—ç¬¦ä¸²è¡¨å®¹æ˜“åŒºåˆ†ã€‚ä¸‰ä¸ªè¡¨æœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œéƒ½æ˜¯Entryçš„æ´¾ç”Ÿç±»ã€‚æŒ‡å‘Entryçš„æŒ‡é’ˆæ˜¯Symbolã€‚</p>
<p>ç”±äºå­—ç¬¦ä¸²è¡¨å­˜å‚¨æ¯ä¸ªå­—ç¬¦ä¸²çš„copyï¼Œæ¯”è¾ƒxå’Œyä»£è¡¨çš„ä¸¤ä¸ªIntEntrysï¼ŒStrEntrysï¼ŒIdEntrysæ˜¯å¦ä¸€æ ·åªéœ€è¦æ¯”è¾ƒx==yã€‚æ¯”è¾ƒä¸¤ä¸ªä¸åŒç¬¦å·è¡¨ä¸­çš„å­—ç¬¦ä¸²æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p>
<p>æœ‰ä¸‰ä¸ªå‡½æ•°å‘è¡¨ä¸­æ·»åŠ å…ƒç´ ï¼šadd string(char *s,int m)ï¼›add string(char *s)ï¼›<br>add int(int i)ï¼Œè¿”å›Entryçš„æ´¾ç”Ÿç±»æ¥æè¿°ç¬¦å·è¡¨è¡¨é¡¹ã€‚</p>
<p>ç›¸å…³æºä»£ç å®ç°ï¼šstringtab.h  stringtab_functions.h  stringtab.cc</p>
<h3 id="Symbol-Tables"><a href="#Symbol-Tables" class="headerlink" title="Symbol Tables"></a>Symbol Tables</h3><p>é™¤äº†å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜å¿…é¡»åŒæ—¶ç¡®å®šå’Œç®¡ç†ä½œç”¨åŸŸã€‚Symbol Tableæ˜¯ç®¡ç†ä½œç”¨åŸŸçš„æ•°æ®ç»“æ„ï¼Œæ˜¯å¦ä¸€ä¸ªæŸ¥æ‰¾è¡¨ã€‚å…³é”®å­—æ˜¯ç¬¦å·/åç§°ï¼Œç»“æœæ˜¯ä¸è¯¥ç¬¦å·ç›¸å…³çš„ä»»ä½•ä¿¡æ¯ã€‚</p>
<p>é™¤äº†åŠ å…¥å’Œåˆ é™¤ç¬¦å·ä¹‹å¤–ï¼Œç¬¦å·è¡¨åŒæ—¶æ”¯æŒè¿›å…¥å’Œé€€å‡ºä½œç”¨åŸŸå’Œæ£€æŸ¥ä¸€ä¸ªæ ‡è¯†ç¬¦æ˜¯å¦åœ¨å½“å‰ä½œç”¨åŸŸä¸‹å·²å®šä¹‰çš„æ“ä½œã€‚æŸ¥è¯¢æ“ä½œå¿…é¡»ä¹Ÿéµå¾ªè¯­è¨€çš„ä½œç”¨åŸŸè§„åˆ™ï¼Œå¦‚æœæ ‡è¯†ç¬¦xæœ‰å¤šé‡å®šä¹‰ï¼Œä½œç”¨åŸŸè§„åˆ™å¿…é¡»ç¡®å®šxæŸ¥æ‰¾è¿”å›çš„å®šä¹‰ï¼Œåœ¨Coolå’Œä¸€èˆ¬è¯­è¨€ä¸­ï¼Œæœ€å†…å±‚çš„å®šä¹‰éšè—å¤–å±‚çš„å®šä¹‰ï¼Œå› æ­¤è¿”å›å…·æœ‰xå®šä¹‰çš„æœ€å†…å±‚çš„ä½œç”¨åŸŸçš„å®šä¹‰ã€‚</p>
<p>Cool ç¬¦å·è¡¨æ˜¯ä½œç”¨åŸŸé“¾è¡¨å®ç°çš„ï¼Œæ¯ä¸€ä¸ªä½œç”¨åŸŸéƒ½æ˜¯&lt;identifier,info&gt;çš„é“¾è¡¨ã€‚</p>
<h3 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h3><p>utilities.hå’Œutilities.ccå®šä¹‰äº†è®¸å¤šå‡½æ•°ï¼Œä¾›å®ç°å’Œè°ƒè¯•Cool è¯æ³•å’Œè¯­æ³•åˆ†æä½¿ç”¨ã€‚</p>
<h3 id="Abstract-Syntax-Tree"><a href="#Abstract-Syntax-Tree" class="headerlink" title="Abstract Syntax Tree"></a>Abstract Syntax Tree</h3><h4 id="Phyla-and-Constructors"><a href="#Phyla-and-Constructors" class="headerlink" title="Phyla and Constructors"></a>Phyla and Constructors</h4><p>ASTæ•°æ®ç±»å‹ä¸ºæ¯ä¸€ç§Coolç»“æ„æä¾›ä¸€ä¸ªè¡¨ç¤ºè¯¥è¡¨è¾¾å¼çš„ç±»ã€‚æœ‰ä¸€ä¸ªletè¡¨è¾¾å¼çš„ç±»ï¼Œ+è¡¨è¾¾å¼çš„ç±»ç­‰ç­‰ã€‚è¿™äº›ç±»çš„å¯¹è±¡æ˜¯Cool æŠ½è±¡è¯­æ³•æ ‘ASTçš„èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼šè¡¨è¾¾å¼e1+e2ç”±ä¸€ä¸ª+è¡¨è¾¾å¼å¯¹è±¡å’Œä¸¤ä¸ªå­æ ‘ï¼šä¸€ä¸ªç”¨äºè¡¨ç¤ºe1è¡¨è¾¾å¼çš„æ ‘ï¼Œä¸€ä¸ªç”¨äºè¡¨ç¤ºe2è¡¨è¾¾å¼çš„æ ‘ã€‚</p>
<p>Cool çš„æŠ½è±¡è¯­æ³•æ ‘åœ¨ä¸€ä¸ªå«åšAPSçš„è¯­è¨€ä¸­æŒ‡å®šï¼Œåœ¨APSæœ¯è¯­ä¸­ï¼ŒæŠ½è±¡è¯­æ³•æ ‘çš„èŠ‚ç‚¹ï¼ˆletï¼Œï¼‹ç­‰ï¼‰è¢«ç§°ä¸ºconstructorsï¼ŒASTçš„å½¢å¼ç”±ä¸€ç»„phylaæè¿°ï¼Œæ¯ä¸€ç§phylumæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªconstructorsã€‚</p>
<p>Phylaå®é™…ä¸Šæ˜¯ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯ä¸€å¤§ç»„æ²¡æœ‰åˆ†åŒ–è¿‡çš„constructorsï¼Œè€Œæ˜¯constructorsæ ¹æ®åŠŸèƒ½åˆ†ç»„åœ¨ä¸€èµ·ã€‚ä¾‹å¦‚ï¼šè¡¨è¾¾å¼çš„æŠ½è±¡è¯­æ³•æ ‘å’Œç±»æŠ½è±¡è¯­æ³•æ ‘ä¸åŒã€‚phylaå®šä¹‰åœ¨æ–‡ä»¶cool-tree.apsä¸­:</p>
<pre><code>module COOL begin
  phylum Program;

  phylum Class_;
  phylum Classes = LIST[Class_];

  phylum Feature;
  phylum Features = LIST[Feature];

  phylum Formal;
  phylum Formals = LIST[Formal];

  phylum Expression;
  phylum Expressions = LIST[Expression];

  phylum Case;
  phylum Cases = LIST[Case];</code></pre><p>ä»å®šä¹‰ä¸­å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸¤ç§å®Œå…¨ä¸åŒçš„phylaï¼šæ™®é€šå‹phylaå’Œé“¾è¡¨å‹phylaï¼Œæ¯ä¸ªæ™®é€šå‹phylaéƒ½æœ‰ç›¸å…³çš„constructorsï¼Œé“¾è¡¨å‹phylaæœ‰ä¸€ç»„å›ºå®šçš„listæ“ä½œã€‚</p>
<p>æ¯ä¸€ä¸ªconstructoréƒ½æœ‰å«æœ‰ç±»å‹çš„å‚æ•°å¹¶è¿”å›ä¸€ä¸ªæœ‰ç±»å‹çš„ç»“æœã€‚ç±»å‹è¦ä¹ˆæ˜¯phylaè¦ä¹ˆæ˜¯ä»»ä½•æ™®é€šçš„C++ç±»å‹ã€‚å®é™…ä¸Šï¼Œphylaå£°æ˜æœ¬èº«ä¼šç”±APSç¼–è¯‘å™¨ç¼–è¯‘æˆC++ç±»å£°æ˜ã€‚ä¸€ä¸ªconstructorå®šä¹‰çš„æ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code>constructor class_(name : Symbol ; parent : Symbol ; features : Features ; filename : Symbol): Class_;</code></pre><p>å®šä¹‰æŒ‡å‡ºclass_ constructoræœ‰å››ä¸ªå‚æ•°ï¼šä¸€ä¸ªç±»åçš„Symbolï¼Œä¸€ä¸ªçˆ¶ç±»åçš„Symbolï¼Œä¸€ä¸ªFeaturesï¼Œä¸€ä¸ªè¯¥ç±»å®šä¹‰å‡ºç°çš„æ–‡ä»¶åçš„Symbolã€‚Featuresçš„phylumè¢«å®šä¹‰ä¸ºFeatureçš„é“¾è¡¨ï¼š</p>
<pre><code>phylum Features = LIST[Feature];</code></pre><p>å®šä¹‰åœ¨ASTé“¾è¡¨ä¸Šçš„æ“ä½œæè¿°è§ç¬¬äºŒå°èŠ‚ã€‚</p>
<p>class_ constructorè¿”å›ä¸€ä¸ªClass_ç±»å‹çš„æŠ½è±¡è¯­æ³•æ ‘ã€‚åœ¨cool.yæ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªä½¿ç”¨class_ constructorçš„ä¾‹å­ï¼š</p>
<pre><code>class : CLASS TYPEID INHERITS TYPEID IS optional_feature_list END â€™;â€™
{ $$ = class_($2,$4,$6,stringtable.add_string(curr_filename)); }</code></pre><p>class_ constructor å»ºç«‹äº†ä¸€ä¸ªClass_æ ‘èŠ‚ç‚¹ï¼Œæœ‰å››ä¸ªå‚æ•°ä½œä¸ºå­èŠ‚ç‚¹ã€‚å› ä¸ºå‚æ•°ç±»å‹è¢«å£°æ˜äº†ï¼ŒC++ç±»å‹æ£€æŸ¥å™¨ä¼šå¼ºåˆ¶class_ constructoråªæ¥å—æ­£ç¡®ç±»å‹çš„å‚æ•°ã€‚è§ç¬¬äº”å°èŠ‚å’Œcool-tree.apsäº†è§£æ›´å¤šå…¶ä»–constructorsã€‚</p>
<h2 id="PA2-lexer-è¯æ³•åˆ†æ"><a href="#PA2-lexer-è¯æ³•åˆ†æ" class="headerlink" title="PA2 lexer è¯æ³•åˆ†æ"></a>PA2 lexer è¯æ³•åˆ†æ</h2><p>å®Œæˆæ­¤labå‰ä¸»è¦å­¦ä¹ å“ˆå·¥å¤§ç¼–è¯‘åŸç†è§†é¢‘ã€‚ç†è§£ä»»åŠ¡è¯´æ˜ä¹¦éå¸¸é‡è¦ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p>flexæ–‡æ¡£ï¼ˆå°¤å…¶å‚è€ƒå…¶ä¸­patternéƒ¨åˆ†ï¼‰ï¼š <a href="https://eternalsakura13.com/2020/05/27/flex/" target="_blank" rel="noopener">https://eternalsakura13.com/2020/05/27/flex/</a> </p>
<p><a href="https://courses.edx.org/assets/courseware/v1/27e1a38f1161e61d91c25a4b1805489b/asset-v1:StanfordOnline+SOE.YCSCS1+1T2020+type@asset+block/cool_manual.pdf" target="_blank" rel="noopener">The Cool Reference Manual</a> ä¸­ 10 Lexical Structure å’Œ  11 Cool Syntax éƒ¨åˆ†</p>
<p>è¯æ³•åˆ†æå™¨lexerå¯ä»¥å°†æˆ‘ä»¬è¾“å…¥çš„ç¨‹åºè¯­è¨€ä¸ç¼–å†™çš„æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™è¿›è¡ŒåŒ¹é…æ¥è¿”å›ä¸€ä¸ªä¸ªtokenã€‚</p>
<p>åœ¨è¿™ä¸ªlabä¸­æˆ‘ä»¬ä½¿ç”¨flexè¯­è¨€æ¥ç¼–å†™Coolç¼–è¯‘å™¨çš„è¯æ³•åˆ†æå™¨ã€‚åˆ©ç”¨Flexæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸€ä¸ªåŒ¹é…çš„patternç¼–å†™ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼å’Œå¯¹åº”æ‰§è¡Œçš„actionæ¥å®ç°è¯æ³•åˆ†æå™¨ã€‚Flexä¼šæŠŠæˆ‘ä»¬çš„è§„åˆ™æ–‡ä»¶ç¼–è¯‘æˆCæºç ï¼Œå®ç°ä¸€ä¸ªæœ‰ç©·è‡ªåŠ¨æœºï¼Œä»¥è¯†åˆ«æˆ‘ä»¬åœ¨è§„åˆ™æ–‡ä»¶ä¸­æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å¯ä»¥æ£€æŸ¥å‡ºå› ä¸ºçŠ¶æ€æœºæ— æ³•æ­£ç¡®è½¬æ¢çš„é”™è¯¯ï¼Œä¾‹å¦‚ï¼šå¼•å·ã€æ³¨é‡Šç¬¦å·ä¸é—­åˆï¼›å­—ç¬¦ä¸²è¿‡é•¿ç­‰ã€‚</p>
<p>flexè¯­è¨€çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>%{
Declarations
%}
Definitions
%%
Rules
%%
User subroutines</code></pre><p>å…¶ä¸­Declarationså’ŒUser subroutinesæ˜¯å¯é€‰é¡¹ã€‚Definitionä¹Ÿæ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯ä¾¿äºæˆ‘ä»¬ç»™æ­£åˆ™è¡¨è¾¾å¼å–åå­—ï¼Œä¾‹å¦‚ï¼š<code>\DIGIT [0-9]</code>å®šä¹‰äº†æ•°å­—ã€‚å…¶ä¸­ï¼Œæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯rulesï¼Œå®ƒæŒ‡å®šäº†æœ‰åŒ¹é…åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶è¿›è¡Œçš„actionï¼Œactionæœ‰å¸¸è§„çš„Cè¯­è¨€ä»£ç æŒ‡å®šã€‚Flexä½¿ç”¨æœ€é•¿åŒ¹é…åŸåˆ™ã€‚</p>
<p>ç¼–å†™è§„åˆ™çš„æ—¶å€™ï¼Œæ ¹æ®ä¹‹å‰é‡åˆ°çš„tokensæ¥æ‰§è¡Œä¸åŒçš„actionã€‚å¯ä»¥é€šè¿‡åœ¨declarationä¸­å£°æ˜å…¨å±€å˜é‡æ¥è¿½è¸ªçŠ¶æ€ï¼ŒFlexä¸­æä¾›äº†çŠ¶æ€å£°æ˜çš„æ–¹å¼ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>%Start COMMENT</code></pre><p>å¯ä»¥é€šè¿‡<code>BEGIN(COMMENT)</code>æŠŠCOMMENTçŠ¶æ€è®¾ç½®ä¸ºTRUEï¼Œè¦ä»…åœ¨å…ˆå‰é‡åˆ°å¼€å¤´æ³¨é‡Šæ—¶æ‰§è¡Œæ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•åœ¨çŠ¶æ€COMMENTä¸­å£°æ˜è§„åˆ™ï¼š</p>
<pre><code>&lt;COMMENT&gt; {
// the rest of your rule ...
}</code></pre><p>ç‰¹æ®Šçš„é»˜è®¤çŠ¶æ€æ˜¯INITIALã€‚</p>
<h3 id="ç”Ÿæˆlexerä»£ç åˆ†æ"><a href="#ç”Ÿæˆlexerä»£ç åˆ†æ" class="headerlink" title="ç”Ÿæˆlexerä»£ç åˆ†æ"></a>ç”Ÿæˆlexerä»£ç åˆ†æ</h3><p>ä¸»è¦åˆ†æç¼–å†™ç¼–è¯‘å™¨è¿‡ç¨‹ä¸­ç”Ÿæˆçš„cool-lex.ccæ–‡ä»¶çš„ä»£ç ç»“æ„ï¼š</p>
<p>é¦–å…ˆæ˜¯å®šä¹‰flexç‰ˆæœ¬å·å’Œflexæ•´æ•°ç±»å‹ï¼Œä»¥åŠä¸€äº›å¤„ç†ç¼“å†²åŒºå’ŒçŠ¶æ€è½¬æ¢çš„å®å®šä¹‰ï¼Œ</p>
<pre><code class="line-numbers language-C">/* A lexical scanner generated by flex */
#define FLEX_SCANNER
#define YY_FLEX_MAJOR_VERSION 2
#define YY_FLEX_MINOR_VERSION 6
#define YY_FLEX_SUBMINOR_VERSION 0
#if YY_FLEX_SUBMINOR_VERSION &gt; 0
#define FLEX_BETA
#endif

/* First, we deal with  platform-specific or compiler-specific issues. */

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;errno.h&gt;
#include &lt;stdlib.h&gt;

/* flex integer type definitions */

#ifndef FLEXINT_H
#define FLEXINT_H

/* C99 systems have &lt;inttypes.h&gt;. Non-C99 systems may or may not. */

typedef signed char flex_int8_t;
typedef short int flex_int16_t;
typedef int flex_int32_t;
typedef unsigned char flex_uint8_t; 
typedef unsigned short int flex_uint16_t;
typedef unsigned int flex_uint32_t;

/* Limits of integral types. */
#ifndef INT8_MIN
#define INT8_MIN               (-128)
#endif
#ifndef INT16_MIN
#define INT16_MIN              (-32767-1)
#endif
#ifndef INT32_MIN
#define INT32_MIN              (-2147483647-1)
#endif
#ifndef INT8_MAX
#define INT8_MAX               (127)
#endif
#ifndef INT16_MAX
#define INT16_MAX              (32767)
#endif
#ifndef INT32_MAX
#define INT32_MAX              (2147483647)
#endif
#ifndef UINT8_MAX
#define UINT8_MAX              (255U)
#endif
#ifndef UINT16_MAX
#define UINT16_MAX             (65535U)
#endif
#ifndef UINT32_MAX
#define UINT32_MAX             (4294967295U)
#endif

#endif /* ! C99 */

#endif /* ! FLEXINT_H */

/*å­˜å‚¨ç±»ä¿®é¥°ç¬¦constæœ‰æ•ˆ */
#define YY_USE_CONST

#ifdef YY_USE_CONST
#define yyconst const
#else
#define yyconst
#endif

/* %not-for-header */

/* åœ¨æ–‡ä»¶ç»“æŸæ—¶è¿”å›YY_NULL */
#define YY_NULL 0

/*å°†å¯èƒ½ä¸ºè´Ÿçš„ï¼Œå¯èƒ½ä¸ºå¸¦ç¬¦å·çš„charè½¬æ¢ä¸ºä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œ
 *ä»¥ç”¨ä½œæ•°ç»„ç´¢å¼•ã€‚å¦‚æœå¸¦ç¬¦å·çš„charä¸ºè´Ÿæ•°ï¼Œæˆ‘ä»¬æƒ³å°†å…¶è§†ä¸º8ä½æ— ç¬¦å·çš„charï¼Œ
 *å› æ­¤é‡‡ç”¨åŒç²¾åº¦å¼ºåˆ¶è½¬æ¢ã€‚
 */
#define YY_SC_TO_UI(c) ((unsigned int) (unsigned char) c)

/* è¿›å…¥å¼€å§‹çŠ¶æ€ */
#define BEGIN (yy_start) = 1 + 2 *

/* å°†å½“å‰çš„å¼€å§‹çŠ¶æ€è½¬æ¢ä¸ºä¸€ä¸ªå€¼ï¼Œä»¥åå¯ä»¥å°†è¯¥å€¼ä¼ é€’ç»™BEGINä»¥è¿”å›è¯¥çŠ¶æ€ã€‚
   YYSTATEåˆ«åç”¨äºlexå…¼å®¹æ€§ã€‚
 */
#define YY_START (((yy_start) - 1) / 2)
#define YYSTATE YY_START

/* ç»™å®šå¼€å§‹çŠ¶æ€çš„EOFè§„åˆ™çš„action numã€‚ */
#define YY_STATE_EOF(state) (YY_END_OF_BUFFER + state + 1)

/* å¼€å§‹å¤„ç†æ–°æ–‡ä»¶ */
#define YY_NEW_FILE yyrestart(yyin  )

#define YY_END_OF_BUFFER_CHAR 0

/* é»˜è®¤è¾“å…¥ç¼“å†²åŒºçš„å¤§å° */
#ifndef YY_BUF_SIZE
#ifdef __ia64__
/* On IA-64, the buffer size is 16k, not 8k.
 * Moreover, YY_BUF_SIZE is 2*YY_READ_BUF_SIZE in the general case.
 * Ditto for the __ia64__ case accordingly.
 */
#define YY_BUF_SIZE 32768
#else
#define YY_BUF_SIZE 16384
#endif /* __ia64__ */
#endif

/* çŠ¶æ€bufå¿…é¡»è¶³å¤Ÿå¤§ï¼Œæ‰èƒ½åœ¨ä¸»ç¼“å†²åŒºä¸­ä¸ºæ¯ä¸ªå­—ç¬¦ä¿ç•™ä¸€ä¸ªçŠ¶æ€ã€‚*/
#define YY_STATE_BUF_SIZE   ((YY_BUF_SIZE + 2) * sizeof(yy_state_type))

#ifndef YY_TYPEDEF_YY_BUFFER_STATE
#define YY_TYPEDEF_YY_BUFFER_STATE
typedef struct yy_buffer_state *YY_BUFFER_STATE;
#endif

#ifndef YY_TYPEDEF_YY_SIZE_T
#define YY_TYPEDEF_YY_SIZE_T
typedef size_t yy_size_t;
#endif

extern yy_size_t yyleng;

extern FILE *yyin, *yyout;

#define EOB_ACT_CONTINUE_SCAN 0
#define EOB_ACT_END_OF_FILE 1
#define EOB_ACT_LAST_MATCH 2

    #define YY_LESS_LINENO(n)
    #define YY_LINENO_REWIND_TO(ptr)

/* å°†é™¤å‰ n ä¸ªåŒ¹é…å­—ç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦è¿”å›åˆ°è¾“å…¥æµã€‚ */
#define yyless(n) \
    do \
        { \
        /*æ’¤æ¶ˆè®¾ç½®yytextçš„æ•ˆæœã€‚*/ \
        int yyless_macro_arg = (n); \
        YY_LESS_LINENO(yyless_macro_arg);\
        *yy_cp = (yy_hold_char); \
        YY_RESTORE_YY_MORE_OFFSET \
        (yy_c_buf_p) = yy_cp = yy_bp + yyless_macro_arg - YY_MORE_ADJ; \
        YY_DO_BEFORE_ACTION; /* set up yytext again */ \
        } \
    while ( 0 )

#define unput(c) yyunput( c, (yytext_ptr)  )

#ifndef YY_STRUCT_YY_BUFFER_STATE
#define YY_STRUCT_YY_BUFFER_STATE
struct yy_buffer_state
    {
    FILE *yy_input_file;
    char *yy_ch_buf;        /* input buffer */
    char *yy_buf_pos;        /* current position in input buffer */

    /* è¾“å…¥ç¼“å†²åŒºçš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼Œä¸åŒ…æ‹¬EOBå­—ç¬¦çš„ç©ºé—´ã€‚*/
    yy_size_t yy_buf_size;

    /* è¯»å…¥yy_ch_bufçš„å­—ç¬¦æ•°ï¼Œä¸åŒ…æ‹¬EOBå­—ç¬¦ã€‚*/
    int yy_n_chars;

    /*æ˜¯å¦åˆ›å»ºç¼“å†²åŒºï¼Œå¹¶ä¸”å¯ä»¥å¯¹å…¶è¿›è¡Œrealloc()å’Œfree() */
    int yy_is_our_buffer;

    /* æ˜¯å¦æ˜¯äº¤äº’å¼è¾“å…¥; å¦‚æœæ˜¯äº¤äº’å¼,å¹¶ä¸”å¦‚æœæˆ‘ä»¬ä½¿ç”¨stdioä½œä¸ºè¾“å…¥,é‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨getc()
     * è€Œä¸æ˜¯fread(), ä»¥ç¡®ä¿æˆ‘ä»¬åœ¨æ¯ä¸ªæ¢è¡Œç¬¦ä¹‹åéƒ½åœæ­¢è·å–è¾“å…¥
     */
    int yy_is_interactive;

    /* æ˜¯å¦è®¤ä¸ºæˆ‘ä»¬å¤„äºä¸€è¡Œçš„å¼€å¤´,å¦‚æœæ˜¯,åˆ™&#39;^&#39;è§„åˆ™å°†åœ¨ä¸‹ä¸€åœºåŒ¹é…ä¸­ç”Ÿæ•ˆï¼Œå¦åˆ™æ— æ•ˆã€‚
     */
    int yy_at_bol;

    int yy_bs_lineno; /**&lt; The line count. */
    int yy_bs_column; /**&lt; The column count. */

    /* åœ¨åˆ°è¾¾è¾“å…¥ç¼“å†²åŒºçš„æœ«å°¾æ—¶æ˜¯å¦å°è¯•å¡«å……å®ƒ */
    int yy_fill_buffer;

    int yy_buffer_status;

#define YY_BUFFER_NEW 0
#define YY_BUFFER_NORMAL 1
    /* å¦‚æœçœ‹åˆ°äº†EOF,ä½†ä»æœ‰ä¸€äº›æ–‡æœ¬è¦å¤„ç†,åˆ™æˆ‘ä»¬å°†ç¼“å†²åŒºæ ‡è®°ä¸ºYY_EOF_PENDING,
    *  ä»¥è¡¨æ˜æˆ‘ä»¬ä¸åº”è¯¥å†å°è¯•ä»è¾“å…¥æºä¸­è¿›è¡Œè¯»å–äº†
    *  ä½†æ˜¯ï¼Œç”±äºå¯èƒ½å­˜åœ¨å¤‡ä»½ï¼Œæˆ‘ä»¬å¯èƒ½ä»æœ‰è®¸å¤štokensè¦åŒ¹é…
    *  å½“æˆ‘ä»¬å®é™…çœ‹åˆ°EOFæ—¶ï¼Œæˆ‘ä»¬å°†çŠ¶æ€æ›´æ”¹ä¸º new (é€šè¿‡yyrestart())ï¼Œ
    *  ä»¥ä¾¿ç”¨æˆ·åªéœ€å°†yyinæŒ‡å‘æ–°çš„è¾“å…¥æ–‡ä»¶å³å¯ç»§ç»­æ‰«æ
    */
#define YY_BUFFER_EOF_PENDING 2
    };
#endif /* !YY_STRUCT_YY_BUFFER_STATE */

/* Stack of input buffers. */
static size_t yy_buffer_stack_top = 0; /**&lt; index of top of stack. */
static size_t yy_buffer_stack_max = 0; /**&lt; capacity of stack. */
static YY_BUFFER_STATE * yy_buffer_stack = 0; /**&lt; Stack as an array. */

/* æˆ‘ä»¬æä¾›äº†ç”¨äºè®¿é—®ç¼“å†²åŒºçŠ¶æ€çš„å®,ä»¥é˜²å°†æ¥æˆ‘ä»¬å¸Œæœ›å°†ç¼“å†²åŒºçŠ¶æ€ç½®äºæ›´é€šç”¨çš„&quot;æ‰«æå™¨çŠ¶æ€&quot;ä¸­
 * è¿”å›æ ˆé¡¶æˆ–NULL
 */
#define YY_CURRENT_BUFFER ( (yy_buffer_stack) \
                          ? (yy_buffer_stack)[(yy_buffer_stack_top)] \
                          : NULL)

/* ä¸ä»¥å‰çš„å®ç›¸åŒï¼Œä½†æ˜¯ä¾¿äºç¼“å†²åŒºå †æ ˆä¸æ˜¯NULLæˆ–éœ€è¦å·¦å€¼æ—¶ ä»…åœ¨å†…éƒ¨ä½¿ç”¨
 */
#define YY_CURRENT_BUFFER_LVALUE (yy_buffer_stack)[(yy_buffer_stack_top)]

/* yy_hold_char holds the character lost when yytext is formed. */
static char yy_hold_char;
static int yy_n_chars;        /* number of characters read into yy_ch_buf */
yy_size_t yyleng;

/* Points to current character in buffer. */
static char *yy_c_buf_p = (char *) 0;
static int yy_init = 0;        /* whether we need to initialize */
static int yy_start = 0;    /* start state number */

/* ç”¨äºå…è®¸yywrap()è¿›è¡Œç¼“å†²åŒºåˆ‡æ¢è€Œä¸æ˜¯è®¾ç½®æ–°çš„yyinçš„æ ‡å¿—
 */
static int yy_did_buffer_switch_on_eof;

void yyrestart (FILE *input_file  );
void yy_switch_to_buffer (YY_BUFFER_STATE new_buffer  );
YY_BUFFER_STATE yy_create_buffer (FILE *file,int size  );
void yy_delete_buffer (YY_BUFFER_STATE b  );
void yy_flush_buffer (YY_BUFFER_STATE b  );
void yypush_buffer_state (YY_BUFFER_STATE new_buffer  );
void yypop_buffer_state (void );

static void yyensure_buffer_stack (void );
static void yy_load_buffer_state (void );
static void yy_init_buffer (YY_BUFFER_STATE b,FILE *file  );

#define YY_FLUSH_BUFFER yy_flush_buffer(YY_CURRENT_BUFFER )

YY_BUFFER_STATE yy_scan_buffer (char *base,yy_size_t size  );
YY_BUFFER_STATE yy_scan_string (yyconst char *yy_str  );
YY_BUFFER_STATE yy_scan_bytes (yyconst char *bytes,yy_size_t len  );

void *yyalloc (yy_size_t  );
void *yyrealloc (void *,yy_size_t  );
void yyfree (void *  );

#define yy_new_buffer yy_create_buffer

#define yy_set_interactive(is_interactive) \
    { \
    if ( ! YY_CURRENT_BUFFER ){ \
        yyensure_buffer_stack (); \
        YY_CURRENT_BUFFER_LVALUE =    \
            yy_create_buffer(yyin,YY_BUF_SIZE ); \
    } \
    YY_CURRENT_BUFFER_LVALUE-&gt;yy_is_interactive = is_interactive; \
    }

#define yy_set_bol(at_bol) \
    { \
    if ( ! YY_CURRENT_BUFFER ){\
        yyensure_buffer_stack (); \
        YY_CURRENT_BUFFER_LVALUE =    \
            yy_create_buffer(yyin,YY_BUF_SIZE ); \
    } \
    YY_CURRENT_BUFFER_LVALUE-&gt;yy_at_bol = at_bol; \
    }

#define YY_AT_BOL() (YY_CURRENT_BUFFER_LVALUE-&gt;yy_at_bol)

/* %% [1.0] yytext/yyin/yyout/yy_state_type/yylineno etc. def&#39;s &amp; init go here */
/* Begin user sect3 */

#define FLEX_DEBUG

typedef unsigned char YY_CHAR;

FILE *yyin = (FILE *) 0, *yyout = (FILE *) 0;

typedef int yy_state_type;

extern int yylineno;

int yylineno = 1;

extern char *yytext;
#ifdef yytext_ptr
#undef yytext_ptr
#endif
#define yytext_ptr yytext

static yy_state_type yy_get_previous_state (void );
static yy_state_type yy_try_NUL_trans (yy_state_type current_state  );
static int yy_get_next_buffer (void );
static void yy_fatal_error (yyconst char msg[]  );

/* åœ¨åŒ¹é…å½“å‰æ¨¡å¼ä¹‹åä¸”åœ¨æ‰§è¡Œç›¸åº”æ“ä½œä¹‹å‰å®Œæˆ-è®¾ç½®yytext
 */
#define YY_DO_BEFORE_ACTION \
    (yytext_ptr) = yy_bp; \
/* %% [2.0] code to fiddle yytext and yyleng for yymore() goes here \ */\
    yyleng = (size_t) (yy_cp - yy_bp); \
    (yy_hold_char) = *yy_cp; \
    *yy_cp = &#39;\0&#39;; \
/* %% [3.0] code to copy yytext_ptr to yytext[] goes here, if %array \ */\
    (yy_c_buf_p) = yy_cp;

/* %% [4.0] data tables for the DFA and the user&#39;s section 1 definitions go here */
#define YY_NUM_RULES 45
#define YY_END_OF_BUFFER 46</code></pre>
<p>æ¥ä¸‹æ¥æ˜¯å‹ç¼©åçš„DFAçŠ¶æ€è½¬ç§»è¡¨ï¼š</p>
<pre><code class="line-numbers language-C">yyconst flex_int16_t yy_accept[168]
yyconst YY_CHAR yy_ec[256]
yyconst YY_CHAR yy_meta[53]
yyconst flex_uint16_t yy_base[174]
yyconst flex_int16_t yy_def[174]
yyconst flex_uint16_t yy_nxt[349]
yyconst flex_int16_t yy_chk[349]</code></pre>
<p>éšåï¼ŒDFAçš„å·¥ä½œé€šè¿‡YY_DECLå®ç°ï¼Œçœç•¥äº†éƒ¨åˆ†æ¡ä»¶åˆ†æ”¯è¯­å¥çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="line-numbers language-C">YY_DECL
{
    yy_state_type yy_current_state;
    char *yy_cp, *yy_bp;
    int yy_act;

    if ( !(yy_init) )
        {
        (yy_init) = 1;
        if ( ! (yy_start) )
            (yy_start) = 1;    /* first start state */
        if ( ! yyin )
            yyin = stdin;
        if ( ! yyout )
            yyout = stdout;
        if ( ! YY_CURRENT_BUFFER ) {
            yyensure_buffer_stack ();
            YY_CURRENT_BUFFER_LVALUE =
                yy_create_buffer(yyin,YY_BUF_SIZE );
        }
        yy_load_buffer_state( );
        }

    {
    while ( 1 )        /* loops until end-of-file is reached */
        {
        /* è®¾ç½®åœ¨bufä¸­çš„æŒ‡é’ˆï¼Œé€šè¿‡yytextè·å–ç›¸åº”çš„å­—ç¬¦ä¸² */
        yy_cp = (yy_c_buf_p);

        /* Support of yytext. */
        *yy_cp = (yy_hold_char);

        /* åˆå§‹æ—¶ yy_bp æŒ‡å‘ yy_ch_buf */
        yy_bp = yy_cp;
        /* åˆå§‹ä»startçŠ¶æ€å¼€å§‹ */
        yy_current_state = (yy_start);
yy_match:
/* å¼€å§‹è¿›è¡ŒçŠ¶æ€è½¬ç§», é€šè¿‡yy_nxtè¡¨ï¼Œç»“åˆyy_current_stateå’Œå½“å‰è¯»å…¥çš„å­—ç¬¦æ¥ç´¢å¼•è·³è½¬çŠ¶æ€, ç›´åˆ°æ— æ³•è½¬ç§»*/
        do
            {
            YY_CHAR yy_c = yy_ec[YY_SC_TO_UI(*yy_cp)] ;
            if ( yy_accept[yy_current_state] )
                {
                (yy_last_accepting_state) = yy_current_state;
                (yy_last_accepting_cpos) = yy_cp;
                }
            while ( yy_chk[yy_base[yy_current_state] + yy_c] != yy_current_state )
                {
                yy_current_state = (int) yy_def[yy_current_state];
                if ( yy_current_state &gt;= 168 )
                    yy_c = yy_meta[(unsigned int) yy_c];
                }
            yy_current_state = yy_nxt[yy_base[yy_current_state] + (unsigned int) yy_c];
            ++yy_cp;
            }
        while ( yy_base[yy_current_state] != 296 );

yy_find_action:
/* åˆ¤æ–­è½¬ç§»åçš„çŠ¶æ€æ˜¯å¦æ˜¯accept ï¼Œæ˜¯å¦éœ€è¦åé€€å¤„ç† */
        yy_act = yy_accept[yy_current_state];
        if ( yy_act == 0 )
            { /* have to back up */
            yy_cp = (yy_last_accepting_cpos);
            yy_current_state = (yy_last_accepting_state);
            yy_act = yy_accept[yy_current_state];
            }

        YY_DO_BEFORE_ACTION;

do_action:    
/* æ‰§è¡ŒæˆåŠŸåŒ¹é…è§„åˆ™å¯¹åº”çš„actions */
        if ( yy_flex_debug )
            {
            if ( yy_act == 0 )
                fprintf( stderr, &quot;--scanner backing up\n&quot; );
            else if ( yy_act &lt; 45 )
                fprintf( stderr, &quot;--accepting rule at line %ld (\&quot;%s\&quot;)\n&quot;,
                         (long)yy_rule_linenum[yy_act], yytext );
            else if ( yy_act == 45 )
                fprintf( stderr, &quot;--accepting default rule (\&quot;%s\&quot;)\n&quot;,
                         yytext );
            else if ( yy_act == 46 )
                fprintf( stderr, &quot;--(end of buffer or a NUL)\n&quot; );
            else
                fprintf( stderr, &quot;--EOF (start condition %d)\n&quot;, YY_START );
            }

        switch ( yy_act )
    { 
            case 0: /* must back up */
            /* undo the effects of YY_DO_BEFORE_ACTION */
            *yy_cp = (yy_hold_char);
            yy_cp = (yy_last_accepting_cpos);
            yy_current_state = (yy_last_accepting_state);
            goto yy_find_action;

case 1:
YY_RULE_SETUP
#line 64 &quot;cool.flex&quot;
{BEGIN COMMENT_IN_LINE;}
    YY_BREAK
...
/* æ­¤å¤„çœç•¥caseè¯­å¥ */

        else switch ( yy_get_next_buffer(  ) )
            {
            case EOB_ACT_END_OF_FILE:
                {
                (yy_did_buffer_switch_on_eof) = 0;

                if ( yywrap( ) )
                    {
                    /* æ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨yy_get_next_buffer()ä¸­è®¾ç½®äº†yytext,
                     * æ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥è®¾ç½®yy_c_buf_p
                     */
                    (yy_c_buf_p) = (yytext_ptr) + YY_MORE_ADJ;

                    yy_act = YY_STATE_EOF(YY_START);
                    goto do_action;
                    }

                else
                    {
                    if ( ! (yy_did_buffer_switch_on_eof) )
                        YY_NEW_FILE;
                    }
                break;
                }

            case EOB_ACT_CONTINUE_SCAN:
                (yy_c_buf_p) =
                    (yytext_ptr) + yy_amount_of_matched_text;

                yy_current_state = yy_get_previous_state(  );

                yy_cp = (yy_c_buf_p);
                yy_bp = (yytext_ptr) + YY_MORE_ADJ;
                goto yy_match;

            case EOB_ACT_LAST_MATCH:
                (yy_c_buf_p) =
                &amp;YY_CURRENT_BUFFER_LVALUE-&gt;yy_ch_buf[(yy_n_chars)];

                yy_current_state = yy_get_previous_state(  );

                yy_cp = (yy_c_buf_p);
                yy_bp = (yytext_ptr) + YY_MORE_ADJ;
                goto yy_find_action;
            }
        break;
        }

    default:
        YY_FATAL_ERROR(
            &quot;fatal flex scanner internal error--no action found&quot; );
    } /* end of action switch */
        } /* end of scanning one token */
    } /* end of user&#39;s declarations */
} /* end of yylex */</code></pre>
<p>ä»¥ä¸Šæ˜¯DFAçš„æ•´ä½“å·¥ä½œä»£ç ï¼Œä¹Ÿæ˜¯lexerå·¥ä½œçš„æ ¸å¿ƒã€‚ç®€å•æ¥è¯´ï¼Œæœ‰ç©·çŠ¶æ€æœºDFAé€šè¿‡å¤„ç†è¾“å…¥ç¼“å†²åŒºçš„å­—ç¬¦ï¼Œä»startçŠ¶æ€è¿›è¡ŒçŠ¶æ€è½¬æ¢ï¼Œç›´åˆ°ä¸èƒ½å†è¿›è¡Œè½¬æ¢æˆ–å­—ç¬¦ä¸²å¤„ç†å®Œæˆåï¼Œåˆ¤æ–­æ˜¯å¦å¤„äºacceptçŠ¶æ€ï¼Œè‹¥ç¬¦åˆåˆ™æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œactionï¼Œè‡³æ­¤å®ç°äº† pattern -&gt; action çš„å¯¹åº”ã€‚</p>
<p>å‚è€ƒï¼š <a href="https://happyers.top/uncategorized/understanding-c-lexer-generated-by-flex/" target="_blank" rel="noopener">https://happyers.top/uncategorized/understanding-c-lexer-generated-by-flex/</a> </p>
<h2 id="PA3-parser-è¯­æ³•åˆ†æ"><a href="#PA3-parser-è¯­æ³•åˆ†æ" class="headerlink" title="PA3  parser  è¯­æ³•åˆ†æ"></a>PA3  parser  è¯­æ³•åˆ†æ</h2><p>å®Œæˆæ­¤labå‰ä¸»è¦å­¦ä¹ å“ˆå·¥å¤§ç¼–è¯‘åŸç†è§†é¢‘ã€‚ç†è§£ä»»åŠ¡è¯´æ˜ä¹¦éå¸¸é‡è¦ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Theffth/PictureBed/master/img/cs143-1.png" alt="" loading="lazy"></p>
<p>bisonè¯­è¨€ï¼š <a href="https://www.cnblogs.com/pinkman/p/3179056.html" target="_blank" rel="noopener">https://www.cnblogs.com/pinkman/p/3179056.html</a> </p>
<p>åœ¨è¿™ä¸ªlabä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨bisonè¯­è¨€å®ç°ä¸€ä¸ªè¯­æ³•åˆ†æå™¨ã€‚è¯­æ³•åˆ†æå™¨çš„è¾“å‡ºæ˜¯æŠ½è±¡è¯­æ³•æ ‘ASTï¼Œbisonä½¿ç”¨è‡ªåº•å‘ä¸Šã€å·¦é€’å½’çš„æ–¹å¼ï¼Œå› æ­¤å¯ä»¥å› æ— æ³•è§„çº¦æ£€æŸ¥å‡ºä¸€äº›ä¸ç¬¦åˆè¯­æ³•è§„åˆ™çš„é”™è¯¯ã€‚</p>
<p>ç”Ÿæˆparserä»£ç åˆ†æä¸»è¦å­¦ä¹ ï¼š <a href="https://happyers.top/compiler/bison-parser/" target="_blank" rel="noopener">https://happyers.top/compiler/bison-parser/</a> </p>
<h2 id="PA4-Semant-è¯­ä¹‰åˆ†æ"><a href="#PA4-Semant-è¯­ä¹‰åˆ†æ" class="headerlink" title="PA4 Semant è¯­ä¹‰åˆ†æ"></a>PA4 Semant è¯­ä¹‰åˆ†æ</h2><p>æ­¤labçš„å®Œæˆä¸»è¦å­¦ä¹ Stanfordè¯¾ç¨‹çš„PPTã€‚</p>
<p>ç›®çš„ï¼šå®Œå–„ç”±parserç”Ÿæˆçš„ASTï¼Œä¸ºå…¶æ·»åŠ å‡½æ•°å’Œæ•°æ®æˆå‘˜ï¼Œä¾¿äºcode generatoræ‰€ç”¨ã€‚</p>
<p>ä¸»è¦å‚è€ƒèµ„æ–™ï¼š</p>
<p>Cool Reference Manualï¼šå‚è€ƒç›¸å…³ç±»å‹è§„åˆ™ï¼Œæ ‡è¯†ç¬¦ä½œç”¨åŸŸè§„åˆ™ï¼ŒCoolè¯­è¨€çš„ç›¸å…³é™åˆ¶</p>
<p> A Tour of Cool Support Codeï¼šç»“åˆprojectä¸­çš„æºç ç†è§£å·²æœ‰çš„æ¶æ„</p>
<p>ä¸»è¦ä»»åŠ¡ï¼š</p>
<ol>
<li><p>æ‰¾åˆ°æ‰€æœ‰çš„ç±»å¹¶å»ºç«‹ç»§æ‰¿å›¾</p>
</li>
<li><p>æ£€æŸ¥ç»§æ‰¿å›¾æ˜¯å¦è§„èŒƒ</p>
<p>ç»§æ‰¿å›¾ä¸èƒ½æˆç¯ï¼ŒCoolä¸­ä»åŸºæœ¬ç±»ç»§æ‰¿æœ‰é™åˆ¶ï¼Œå¦‚æœAç±»ç»§æ‰¿äº†Bç±»ä½†æ˜¯Bç±»æœªå®šä¹‰ä¹Ÿæ˜¯ä¸€ç§é”™è¯¯</p>
</li>
<li><p>å¯¹äºæ¯ä¸€ä¸ªç±»ï¼š</p>
<ol>
<li><p>éå†ASTï¼ŒæŠŠæ‰€æœ‰å¯è§†åŒ–çš„å£°æ˜åŠ å…¥åˆ°ç¬¦å·è¡¨ä¸­</p>
<p>éœ€è¦éå†æ ‘ï¼Œç®¡ç†ä»ASTä¸­æ”¶é›†åˆ°çš„ä¿¡æ¯ï¼Œå¹¶ç”±æ­¤åŠ å¼ºè¯­ä¹‰åˆ†æï¼ŒåŒæ—¶éœ€è¦åˆ©ç”¨SymbolTableç¡®å®šå˜é‡çš„æœ‰æ•ˆä½œç”¨åŸŸ</p>
</li>
<li><p>æ£€æŸ¥æ¯ä¸€ä¸ªè¡¨è¾¾å¼çš„ç±»å‹æ­£ç¡®æ€§</p>
<p>åŒ…æ‹¬æ£€æŸ¥æ˜¯å¦åœ¨æœ‰éœ€è¦æ—¶å£°æ˜æœ‰æ•ˆç±»å‹ï¼Œä»¥åŠæ ¹æ®ç±»å‹è§„åˆ™éªŒè¯æ¯ä¸ªè¡¨è¾¾å¼æ˜¯å¦å…·æœ‰æœ‰æ•ˆç±»å‹</p>
</li>
<li><p>ç”¨ç±»å‹æ³¨é‡Šç¬¦å·è¡¨</p>
</li>
<li><p>ç»™å‡ºæ°å½“çš„é”™è¯¯æŠ¥å‘Š</p>
<p>é™¤äº†ç±»ç»§æ‰¿å…³ç³»çš„é”™è¯¯ä¹‹å¤–ï¼Œè¯­ä¹‰åˆ†æéœ€è¦ä¸ºå…¶ä»–é”™è¯¯ç»™å‡ºå®Œæ•´ä¸”ä¿¡æ¯ä¸°å¯Œçš„é”™è¯¯</p>
</li>
</ol>
</li>
</ol>
<p>ä¸»è¦å®ç°ï¼š</p>
<ul>
<li>å®‰è£…åŸºæœ¬ç±»<ul>
<li>Basic Classä¸­åªæœ‰Object å’Œ IO ç±»å¯ä»¥è¢«ç»§æ‰¿ï¼Œå…¶ä½™ç±»å‡ä¸å¯è¢«ç»§æ‰¿</li>
</ul>
</li>
<li>å®‰è£…ç”¨æˆ·è‡ªå®šä¹‰ç±»<ul>
<li>ä¼šæ£€æŸ¥æ˜¯å¦ä¸åŸºæœ¬ç±»å’Œå·²installçš„ç”¨æˆ·å®šä¹‰ç±»é‡å¤</li>
</ul>
</li>
<li>ç®€å•æ£€æŸ¥ä¸æ­£ç¡®çš„ç»§æ‰¿å…³ç³»<ul>
<li>ä¼šæ£€æŸ¥æ˜¯å¦ç»§æ‰¿è‡ªæœªå®šä¹‰æˆ–è€…ä¸å¯è¢«ç»§æ‰¿çš„çˆ¶ç±»</li>
</ul>
</li>
<li>å»ºç«‹ç»§æ‰¿æ ‘ï¼Œå»ºç«‹çˆ¶å­ç»§æ‰¿å…³ç³»</li>
<li>ä»ç»§æ‰¿æ ‘çš„æ ¹éƒ¨è‡ªé¡¶å‘ä¸‹æ ‡è®°reachable</li>
<li>åˆ¤æ–­ç»§æ‰¿å›¾æ˜¯å¦æˆç¯<ul>
<li>ä¸ºæ¯ä¸€ä¸ªç±»ç»§æ‰¿èŠ‚ç‚¹è®¾ç½®çˆ¶å­èŠ‚ç‚¹å…³ç³»ï¼Œç”±äºCoolä¸­çš„ç»§æ‰¿æ˜¯å•ç»§æ‰¿çš„ï¼Œæ¯ä¸ªæ²¡æœ‰ç»§æ‰¿çˆ¶ç±»çš„èŠ‚ç‚¹éƒ½è®¾ç½®ä¸ºç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œå› æ­¤å¦‚æœå‡ºç°æˆç¯çš„æƒ…å†µï¼Œè¯¥ç¯ä¸€å®šç‹¬ç«‹äºä»¥Objectä¸ºæ ¹çš„ASTã€‚ä»æŠ½è±¡è¯­æ³•æ ‘çš„æ ¹Objectå‡ºå‘ï¼Œé€’å½’éå†ASTæ ‘ï¼Œä¸ºæ¯ä¸€ä¸ªå­ç±»æ ‡è®°ä¸ºReachableï¼Œå†æ¬¡éå†æ‰€æœ‰çš„ç±»ç»§æ‰¿èŠ‚ç‚¹ï¼Œè‹¥å‡ºç°æ²¡æœ‰è¢«æ ‡è®°è¿‡çš„ç±»ï¼Œåˆ™è¯´æ˜è¯¥ç»§æ‰¿å›¾ä¸­å­˜åœ¨ç¯ï¼Œé€€å‡ºã€‚</li>
</ul>
</li>
<li>å»ºç«‹feature_tableï¼Œæ·»åŠ æ¯ä¸€ä¸ªç±»çš„attrå’Œmethod</li>
<li>æ£€æŸ¥mainå‡½æ•°</li>
<li>ä»Rootè‡ªé¡¶å‘ä¸‹æ£€æŸ¥æ¯ä¸€ä¸ªç±»çš„featuresï¼šå¯¹ç±»ä¸­çš„æ¯ä¸€ä¸ªattrå’Œmethodè¿›è¡Œç±»å‹æ£€æŸ¥</li>
</ul>
<p>å…·ä½“å®ç°ï¼š<a href="https://github.com/Theffth/skr_university/tree/master/compiler/cool/assignments" target="_blank" rel="noopener">https://github.com/Theffth/skr_university/tree/master/compiler/cool/assignments</a></p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/Theffth/skr_university/tree/master/compiler" target="_blank" rel="noopener">https://github.com/Theffth/skr_university/tree/master/compiler</a></p>
<h3 id="æ€è€ƒé—®é¢˜"><a href="#æ€è€ƒé—®é¢˜" class="headerlink" title="æ€è€ƒé—®é¢˜"></a>æ€è€ƒé—®é¢˜</h3><ul>
<li><p>æµ®ç‚¹æ•°å’Œæ— ç¬¦å·æ•´æ•°çš„æ–‡æ³•</p>
<ul>
<li><p>æ— ç¬¦å·æ•´æ•°çš„æ–‡æ³•ï¼š</p>
<p>â€‹    S-&gt;DE</p>
<p>â€‹    E-&gt;ET| Îµ </p>
<p>â€‹    T-&gt;0|D</p>
<p>â€‹    D-&gt;1|2|3|4|5|6|7|8|9</p>
</li>
<li><p>æµ®ç‚¹æ•°çš„æ–‡æ³•</p>
<p>â€‹    S -&gt; WpR</p>
<p>â€‹    W -&gt; DE</p>
<p>â€‹    E -&gt; R | Îµ </p>
<p>â€‹    T -&gt; 0|D</p>
<p>â€‹    D -&gt; 1|2|3|4|5|6|7|8|9</p>
</li>
</ul>
</li>
<li><p>å„ç±»æ–‡æ³•çš„ä½¿ç”¨æ¡ä»¶å’Œæ¯”è¾ƒ</p>
<ul>
<li><p>è‡ªé¡¶å‘ä¸‹åˆ†æï¼šé¢„æµ‹åˆ†ææ³•</p>
<p>â€‹    LL(1)æ–‡æ³•ï¼šæ»¡è¶³åŒä¸€éç»ˆç»“ç¬¦çš„å¯äº§ç”Ÿå¼çš„å¯é€‰é›†äº’ä¸ç›¸äº¤</p>
<p>â€‹    æ¡ä»¶ï¼šA-&gt; Î± | Î²</p>
<ul>
<li>Î± å’Œ Î² å‡ä¸èƒ½æ¨å¯¼å‡º Îµ </li>
<li>Î± å’Œ Î² è‡³å¤šæœ‰ä¸€ä¸ªæ¨å¯¼å‡º Îµ </li>
</ul>
</li>
<li><p>è‡ªåº•å‘ä¸Šåˆ†æï¼šç§»å…¥-å½’çº¦åˆ†æ</p>
<ul>
<li>å…³é”®é—®é¢˜ï¼šå¦‚ä½•è¯†åˆ«å¥æŸ„ï¼Ÿ<ul>
<li>LRåˆ†ææ³•<ul>
<li>LR(0)åˆ†æ ï¼šå­˜åœ¨ç§»è¿›-å½’çº¦å†²çª &amp; å½’çº¦-å½’çº¦å†²çª ==&gt;</li>
<li>SLRåˆ†æ :  é€šè¿‡ç®€å•çš„å‘å‰æŸ¥çœ‹ä¸€ä¸ªç¬¦å·ä»¥ç¡®å®šæ˜¯å¦æ˜¯å½’çº¦æˆ–å¦‚ä½•å½’çº¦ï¼Œä½†åªæ˜¯å¿…è¦ä¸å……åˆ†æ¡ä»¶   ==&gt;</li>
<li>LR(1)åˆ†æ ï¼šåœ¨ç‰¹å®šä½ç½®ï¼ŒAçš„åç»§é›†åˆæ˜¯FOLLOW(A)çš„å­é›†ï¼Œä½†æ¯”LR(0)åˆ†æçš„çŠ¶æ€å¤šå¾ˆå¤š ==&gt;</li>
<li>LALRåˆ†æï¼šæŠŠæ²¡æœ‰å†²çªçš„çŠ¶æ€é›†è¿›è¡Œåˆå¹¶ï¼Œä½†å¯èƒ½ä¼šå‡ºç°å½’çº¦-å½’çº¦å†²çªå’Œæ¨è¿Ÿé”™è¯¯çš„å‘ç°</li>
<li>ç»¼ä¸Šï¼šSLR &lt; LALR &lt; LR(1)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><pre><code class="line-numbers language-C">for (nd = lookup_class(type1); !type_leq(type2, nd-&gt;get_name()); nd = nd-&gt;get_parentnd())</code></pre>
<p>å¯ä»¥æ”¹æˆtype_leq(nd-&gt;get_name(),type2) å—ï¼Ÿ</p>
<p>ä¸å¯ä»¥ï¼Œåœ¨COOLè¯­è¨€ä¸­æ²¡æœ‰å®šä¹‰<code>&gt;</code>ï¼Œåœ¨ç±»å‹æ£€æŸ¥ä¸­â‰¤çš„å«ä¹‰æ˜¯ç»§æ‰¿è‡ªï¼Œéœ€è¦çœ‹ç»§æ‰¿å›¾ä¸­çš„çˆ¶å­å…³ç³»ã€‚å¦‚æœæ±‚ä¸¤ä¸ªç±»å‹çš„æœ€å°ä¸Šç•Œç±»å‹çš„è¯ï¼Œåº”è¯¥ä»ä¸€ä¸ªç»“ç‚¹å‡ºå‘ä¸€ç›´æœç´¢ç›´åˆ°æ‰¾åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶ç±»ï¼Œå¦‚æœæ”¹æˆtype_leq(nd-&gt;get_name(),type2)çš„è¯ï¼Œåªè¦ndä¸ç»§æ‰¿è‡ªtype2å°±ä¼šç»ˆæ­¢å¾ªç¯å¹¶è¿”å›ndï¼Œå¯è§ï¼Œä¸¤è€…ç»ˆæ­¢æ¡ä»¶ä¸åŒã€‚</p>
</li>
</ul>
</div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Theffth</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://theffth.github.io/2020/07/29/Compiler-CS143/" title="Compiler -- CS143">http://theffth.github.io/2020/07/29/Compiler-CS143/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless stating additionally.</li></ul></section></article></div><div id="comment"><div class="comment-tooltip text-center"><span>ç‚¹å‡»æŒ‰é’®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br><span>è‹¥æ²¡æœ‰æœ¬æ–‡ Issueï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Comment æ¨¡ç‰ˆæ–°å»ºã€‚</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Theffth</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v4.2.1</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.2.0</span></div></footer><script src="/js/prism/prism.js" async></script><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script defer src="/js/utils.js"></script><script defer src="/js/hexo-theme-yun.js"></script></body></html>